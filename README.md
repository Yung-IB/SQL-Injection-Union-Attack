# Technical Report: SQL Injection UNION Attack to Determine Column Count

* **Author:** Olaniyi Ibrahim Abiodun 
* **Date:** August 17, 2025 

***

### 1.0 Executive Summary

This report details the successful identification and analysis of a SQL injection vulnerability within a PortSwigger Web Security Academy lab. The objective was to use Burp Suite to perform a UNION-based SQL injection attack to ascertain the number of columns being fetched by the backend database query. The application's product category filter was identified as the vulnerable entry point. By systematically injecting a series of `UNION SELECT` payloads, the query was confirmed to be returning three columns. This finding is the first critical step in exfiltrating data from the database.

***

### 2.0 Methodology and Execution

The assessment was performed using **Burp Suite Community Edition**, with the **Repeater** tool being used extensively for iterative testing.

#### **Step 1: Initial Reconnaissance**
The application was browsed to identify potential injection points. The product category filter (`/filter?category=...`) was identified as a likely candidate, as its value is likely used in a `WHERE` clause in a SQL query.
<img width="1723" height="817" alt="Burp Intercept" src="https://github.com/user-attachments/assets/431f99b8-1812-4066-a1f5-ecb4b1085aff" />


#### **Step 2: Vulnerability Confirmation**
The HTTP request generated by the category filter was sent to Burp Repeater. A single quote (`'`) was appended to the parameter's value to break the SQL syntax.

* **Payload:** `category=Accessories'` 
* **Result:** The server responded with a **500 Internal Server Error**, confirming that the input was processed by the database and that the application is vulnerable to SQL injection.
* <img width="1716" height="818" alt="Burp Repeater" src="https://github.com/user-attachments/assets/30413a45-693b-4e40-af6e-54dcc7eabda2" />



#### **Step 3: Column Count Enumeration**
A systematic UNION attack was performed to determine the number of columns in the query's result set. `UNION SELECT NULL` payloads were used, incrementing the number of `NULL` values until the server returned a `200 OK` response.

* **Attempt 1 (One Column):**
    * **Payload:** `category=Accessories'+UNION+SELECT+NULL--` 
    * **Result:** `500 Internal Server Error`
    * <img width="1715" height="818" alt="Burp 1st error" src="https://github.com/user-attachments/assets/c8be6ecf-dd62-40b8-a9b8-381d133115f7" />


* **Attempt 2 (Two Columns):**
    * **Payload:** `category=Accessories'+UNION+SELECT+NULL,NULL--` 
    * **Result:** `500 Internal Server Error`
    * <img width="1720" height="824" alt="Burp 2nd error" src="https://github.com/user-attachments/assets/3e8abd72-e820-4c3f-ba14-a3cfdb958991" />


* **Attempt 3 (Three Columns):**
    * **Payload:** `category=Accessories'+UNION+SELECT+NULL,NULL,NULL--` 
    * **Result:** `200 OK`
    * <img width="1715" height="821" alt="Burp OK" src="https://github.com/user-attachments/assets/ed12a648-c8e3-46d5-b294-087c8075d433" />


The successful `200 OK` response confirms the query uses three columns.


***

### 3.0 Findings and Analysis

* **Finding:** The application's product category filter is vulnerable to a SQL injection attack. The backend query that fetches product information returns exactly three columns in its result set.
* **Analysis:** This finding is a critical prerequisite for exfiltrating data. An attacker, having confirmed the column count, can now proceed to the next step of a UNION attack to extract sensitive information (like usernames and passwords) from other tables in the database.

***

### 4.0 Remediation


To fix this vulnerability, the application should be rewritten to use **parameterized queries (prepared statements)**. This ensures that user-supplied input is always treated as data and never as executable SQL code, completely mitigating SQL injection risks.


